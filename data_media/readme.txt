用户上传文件：
  检查用户权限，是否是本人在上传
  media_id的user_id部分是否和access_token返回的user_id一致。

  如果一致，则可以上传。

  上传成功后更新memo的url。
  更新uri，
    如果成功，则继续
    如果memo已经不存在，则删除media

用户获取文件
  检查用户权限，如果是本人在获取，则返回内容流。
  如果是被共享的memo，则返回共享名单中的用户。
  如果是完全公开的memo，例如，共享给POI的，那么允许返回内容流。

  这部分的权限检查需要实现跨zone的请求访问。第一次访问的时候存在着延时。
  本地Cache是否存在?
    是:
      返回本地Cache的内容。如果Cache时间超过一个设定的值（1分钟），向远程zone重新发起请求，cache住。
    否:
      远程请求memo权限，cache并返回。

  这个设计会第一时间返回结果，第二时间更新。用户如果重复访问，将获得最新的结果。


生成缩略图


